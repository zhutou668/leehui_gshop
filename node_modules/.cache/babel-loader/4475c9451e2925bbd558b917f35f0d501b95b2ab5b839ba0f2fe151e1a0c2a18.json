{"ast":null,"code":"// ajax请求函数模块 \n//异步返回是response.data\nimport axios from \"axios\";\nexport default function ajax(url, data = {}, type = 'GET') {\n  return new Promise((resolve, reject) => {\n    //异步请求\n    let promise;\n    if (type === 'GET') {\n      //准备url query 参数数据\n      let dataStr = ''; //数据拼接字符串\n      Object.keys(data).forEach(key => {\n        dataStr += key + '=' + data[key] + '&';\n      });\n      if (dataStr !== '') {\n        dataStr = dataStr.substring(0, dataStr.lastIndexOf('&'));\n        url = url + '?' + dataStr;\n      }\n      promise = axios.get(url);\n    } else {\n      //发送POST请求\n      promise.post(url, data);\n    }\n    promise.then(function (response) {\n      //成功调用resolve()\n      resolve(response.data);\n    }).catch(function (error) {\n      //失败调用reject()\n      reject(error);\n    });\n  });\n}","map":{"version":3,"names":["axios","ajax","url","data","type","Promise","resolve","reject","promise","dataStr","Object","keys","forEach","key","substring","lastIndexOf","get","post","then","response","catch","error"],"sources":["/Users/admin/Desktop/demo-shop/src/api/ajax.js"],"sourcesContent":["// ajax请求函数模块 \n//异步返回是response.data\nimport axios from \"axios\";\n\nexport default function ajax (url,data={},type='GET'){\n    return new Promise((resolve, reject) => {\n        //异步请求\n        let promise \n        if(type === 'GET') {\n            //准备url query 参数数据\n            let dataStr = '' //数据拼接字符串\n            Object.keys(data).forEach(key => {\n                dataStr += key + '=' + data[key] + '&'\n            })\n            if(dataStr !== '') {\n                dataStr = dataStr.substring(0,dataStr.lastIndexOf('&'))\n                url = url + '?' + dataStr\n            }\n            promise = axios.get(url)\n        } \n        else {\n            //发送POST请求\n            promise.post(url,data)\n        }\n        promise.then(function (response){\n             //成功调用resolve()\n            resolve(response.data)\n        }).catch(function (error) {\n            //失败调用reject()\n            reject(error)\n        })     \n    })\n}"],"mappings":"AAAA;AACA;AACA,OAAOA,KAAK,MAAM,OAAO;AAEzB,eAAe,SAASC,IAAIA,CAAEC,GAAG,EAACC,IAAI,GAAC,CAAC,CAAC,EAACC,IAAI,GAAC,KAAK,EAAC;EACjD,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACpC;IACA,IAAIC,OAAO;IACX,IAAGJ,IAAI,KAAK,KAAK,EAAE;MACf;MACA,IAAIK,OAAO,GAAG,EAAE,EAAC;MACjBC,MAAM,CAACC,IAAI,CAACR,IAAI,CAAC,CAACS,OAAO,CAACC,GAAG,IAAI;QAC7BJ,OAAO,IAAII,GAAG,GAAG,GAAG,GAAGV,IAAI,CAACU,GAAG,CAAC,GAAG,GAAG;MAC1C,CAAC,CAAC;MACF,IAAGJ,OAAO,KAAK,EAAE,EAAE;QACfA,OAAO,GAAGA,OAAO,CAACK,SAAS,CAAC,CAAC,EAACL,OAAO,CAACM,WAAW,CAAC,GAAG,CAAC,CAAC;QACvDb,GAAG,GAAGA,GAAG,GAAG,GAAG,GAAGO,OAAO;MAC7B;MACAD,OAAO,GAAGR,KAAK,CAACgB,GAAG,CAACd,GAAG,CAAC;IAC5B,CAAC,MACI;MACD;MACAM,OAAO,CAACS,IAAI,CAACf,GAAG,EAACC,IAAI,CAAC;IAC1B;IACAK,OAAO,CAACU,IAAI,CAAC,UAAUC,QAAQ,EAAC;MAC3B;MACDb,OAAO,CAACa,QAAQ,CAAChB,IAAI,CAAC;IAC1B,CAAC,CAAC,CAACiB,KAAK,CAAC,UAAUC,KAAK,EAAE;MACtB;MACAd,MAAM,CAACc,KAAK,CAAC;IACjB,CAAC,CAAC;EACN,CAAC,CAAC;AACN"},"metadata":{},"sourceType":"module","externalDependencies":[]}